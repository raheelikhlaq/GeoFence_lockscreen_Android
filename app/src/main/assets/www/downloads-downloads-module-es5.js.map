{"version":3,"sources":["./src/app/downloads/downloads.page.html","./src/app/downloads/downloads.module.ts","./src/app/downloads/downloads.page.scss","./src/app/downloads/downloads.page.ts"],"names":[],"mappings":"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","file":"downloads-downloads-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar class=\\\"header--toolbar\\\">\\n    <ion-buttons class=\\\"cursor-pointer\\\" slot=\\\"start\\\" (click)=\\\"gotobackPage()\\\">\\n        <ion-icon name=\\\"arrow-back\\\"></ion-icon>&nbsp;\\n        Downloads\\n    </ion-buttons>\\n</ion-toolbar>\\n</ion-header>\\n<ion-content>\\n  <div class=\\\"page-wrapper\\\">\\n    <div class=\\\"app-container\\\">\\n        <ion-row class=\\\"align-items-stretch\\\">\\n            <ion-col [size]=\\\"12\\\" [sizeLg]=\\\"6\\\" *ngFor=\\\"let video of downloads\\\">\\n              <ion-card class=\\\"ionCard ionCard--noPadding ionCard--mobile ion-margin-bottom\\\" (click)=\\\"openPdf(video.file_url)\\\">\\n                <!--<video width=\\\"100%\\\" height=\\\"100%\\\" controls=\\\"controls\\\" preload=\\\"metadata\\\" autoplay=\\\"autoplay\\\">-->\\n                <!--<source  src=\\\"https://s3.wasabisys.com/churchbase.site/churchchurch-site/mov_bbb.mp4\\\" type=\\\"video/mp4\\\">-->\\n                <!--</video>-->\\n                <div class=\\\"embed-responsive embed-responsive-16by9\\\" *ngIf=\\\"video.file_type !=='pdf' \\\" >\\n                  <iframe class=\\\"embed-responsive-item\\\" width=\\\"100%\\\" height=\\\"100%\\\" *ngIf=\\\"video.file_type === 'ifram'\\\"\\n                          [src]=\\\"video.file_url\\\"\\n                          frameborder=\\\"0\\\" allowfullscreen=\\\"\\\">\\n                  </iframe>\\n                          <video *ngIf=\\\"video.file_type === 'video'\\\" width=\\\"100%\\\" height=\\\"100%\\\" controls=\\\"controls\\\">\\n                            <source  [src]=\\\"video.file_url\\\" type=\\\"video/mp4\\\">\\n                          </video>\\n                          <audio controls *ngIf=\\\"video.file_type === 'audio'\\\">\\n                            <source [src]=\\\"video.file_url\\\"\\n                                    type=\\\"audio/ogg\\\">\\n                            <source [src]=\\\"video.file_url\\\"\\n                                    type=\\\"audio/mpeg\\\">\\n                            Your browser does not support the audio element.\\n                        </audio>\\n                </div>\\n                <ion-card-content>\\n                  <ion-card-title class=\\\"heading4\\\">{{video.file_name}}</ion-card-title>\\n                  <p><b>{{moment(video.created_at).format('LL')}}</b></p>\\n                  <p *ngIf=\\\"video.file_description != ''\\\">{{video.file_description}}</p>\\n                </ion-card-content>\\n              </ion-card>\\n            </ion-col>\\n        </ion-row>\\n    </div>\\n</div>\\n</ion-content>\\n<!-- <app-footer-mobile></app-footer-mobile> -->\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DownloadsPage } from './downloads.page';\nimport { DownloadService } from 'src/services/download.service';\nimport { SharedCommonModule } from '../common/shared-common.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DownloadsPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SharedCommonModule\n  ],\n  declarations: [DownloadsPage],\n  providers: [DownloadService]\n})\nexport class DownloadsPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rvd25sb2Fkcy9kb3dubG9hZHMucGFnZS5zY3NzIn0= */\"","import { Location } from '@angular/common';\nimport { Component, OnInit } from '@angular/core';\nimport { Storage } from '@ionic/storage';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport * as moment from 'moment';\nimport { DownloadService } from 'src/services/download.service';\nimport { LoaderService } from 'src/services/loader.service';\nimport { ToastService } from 'src/services/toast.service';\nimport {EventProviderService} from \"../../services/event-provider.service\";\nimport { CommonService } from 'src/services/common.service';\nimport { Platform } from '@ionic/angular';\nimport { File } from '@ionic-native/file/ngx';\nimport { FileTransfer } from '@ionic-native/file-transfer/ngx';\nimport { InAppBrowserOptions } from '@ionic-native/in-app-browser/ngx';\nimport { DocumentViewer } from '@ionic-native/document-viewer/ngx';\nimport { FileOpener } from '@ionic-native/file-opener/ngx';\nimport { InAppBrowser } from '@ionic-native/in-app-browser/ngx';\n@Component({\n  selector: 'app-downloads',\n  templateUrl: './downloads.page.html',\n  styleUrls: ['./downloads.page.scss'],\n})\nexport class DownloadsPage implements OnInit {\n  downloads: any[] = [];\n  moment: any = moment;\n  auth: any;\n  isUserLoggedIn: boolean = false;\n  account_donor_id: any;\n  device_id: any;\n\n  options: InAppBrowserOptions = {\n    closebuttoncaption: \"Close\",\n    closebuttoncolor: \"#FFFFFF\",\n    disallowoverscroll: \"no\",\n    hidenavigationbuttons: \"no\",\n    toolbar: \"yes\",\n    toolbarposition: \"top\",\n    location: \"yes\",\n  };\n\n\n\n\n\n\n  constructor(\n    private ft: FileTransfer,private file: File,private platform: Platform,private dowloadService: DownloadService, private dom: DomSanitizer, private loader: LoaderService,\n    private location: Location,private storage: Storage,private toast : ToastService,private event_provider: EventProviderService,\n    private documentviewer: DocumentViewer,private fileOpener: FileOpener,private iab: InAppBrowser,\n    private common: CommonService,) { }\n\n  ngOnInit() {\n  }\n\n  ionViewDidEnter(){\n    this.getUser();\n    this.loader.presentLoading().then(() => {\n      // if(this.isUserLoggedIn && this.account_donor_id) {\n        // api/Builder/churchs/favorite/device-fca134-e1ee3e-1a1c88-03c593-898db5/en: \n        this.dowloadService.getDownloads(this.device_id).subscribe(res => {\n          if(res.status){\n            this.downloads = res.favorites;\n            this.downloads.forEach(item => {\n              item['file_url'] = item['file_url'];\n              // item['file_url'] = this.dom.bypassSecurityTrustResourceUrl(item['file_url']);\n            })\n          } else {\n            this.toast.presentToastWithOptions('No download exist for this user' , 'Sorry' , 'warning')\n          }\n          this.loader.stopLoading();\n        });\n      // } else {\n      //   this.loader.stopLoading();\n      //   this.toast.presentToastWithOptions('User must be logged in' , 'Sorry' , 'warning')\n      // }\n\n    })\n  }\n\n  getUser() {\n    // Getting User from local storage\n    this.storage.get('user').then(res => {\n      if (res != null && res != 'guest') {\n        this.isUserLoggedIn = true;\n        this.account_donor_id = res.user.id;\n        this.auth = res.auth;\n      }\n\n    });\n    this.device_id =localStorage.getItem('device_id');\n  }\n\n  bypassUrl(url){\n    return this.dom.bypassSecurityTrustResourceUrl(url);\n  }\n  openPdf(newBypassLink){\n    //this.loader.presentLoading();\n    //console.log('clickedddddd', newBypassLink);\n    if (this.platform.is('cordova')) {\n      let path = this.file.dataDirectory;\n      const transfer = this.ft.create();\n      // console.log('trnasfer created: ', transfer);\n      transfer.download(newBypassLink, `${path}myfile.pdf`).then((res: any)=>{\n        //  console.log('response from download: ', res);\n          let url2 = res.toURL();\n          // console.log('to url is: ', url2);\n          if(this.platform.is('ios' || 'iphone')){\n              this.documentviewer.viewDocument(encodeURI(url2), 'application/pdf', {});\n          }else if(this.platform.is('android')){\n             // console.log('inside the esle: ');\n              this.fileOpener.open(url2, 'application/pdf');\n          }\n      });\n    }else{\n     this.iab.create(newBypassLink, '_blank', this.options);\n    }\n  }\n\n  gotobackPage() {\n    this.location.back();\n  }\n  ionViewWillEnter() {\n    this.ngOnInit();\n  \n    this.event_provider.getChurchData.subscribe(async (res: any) => {\n        if (!(Object.keys(res).length === 0)) {\n            // asking for password\n            let app_pages = res.apppages.find(x => x.name === 'Download');\n            if (app_pages.password_protection_toggle === 'true') {\n                this.common.openPagePasswordModal(app_pages.page_protected_password, app_pages.selected_private_group);\n            }\n        }\n    });\n  \n  }\n}\n"],"sourceRoot":""}